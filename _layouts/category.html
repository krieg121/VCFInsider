---
layout: default
---

<div class="container page-content">
  {%- comment -%}
    Category hero using front-matter icon + accent.
    We DISPLAY the label exactly as authored (title > category > tag),
    and use a separate raw/slug value only for lookups.
  {%- endcomment -%}
  <div class="cat-hero" style="--cat-accent: {{ page.accent | default: '#0077C8' }}">
    {%- assign display_label = page.title | default: page.category | default: page.tag -%}
    {%- assign raw_label     = page.category | default: page.tag | default: page.title -%}

    <h1 class="title">
      {% if page.icon_class %}
        <i class="{{ page.icon_class }}"></i>
      {% elsif page.icon %}
        {{ page.icon }}
      {% endif %}
      {{ display_label }}
    </h1>

    {%- if page.description -%}
      <p class="desc">{{ page.description }}</p>
    {%- endif -%}
  </div>

  {%- comment -%}
    Find posts whose category *slug* matches this page (case/spacing agnostic).
  {%- endcomment -%}
  {%- assign target_slug = raw_label | slugify -%}

  {%- assign matched_posts = "" | split: "" -%}
  {%- for pair in site.categories -%}
    {%- assign key   = pair[0] -%}
    {%- assign items = pair[1] -%}
    {%- assign key_slug = key | slugify -%}
    {%- if key_slug == target_slug -%}
      {%- assign matched_posts = items -%}
      {%- break -%}
    {%- endif -%}
  {%- endfor -%}

  {%- if matched_posts.size == 0 -%}
    {%- for pair in site.tags -%}
      {%- assign key   = pair[0] -%}
      {%- assign items = pair[1] -%}
      {%- assign key_slug = key | slugify -%}
      {%- if key_slug == target_slug -%}
        {%- assign matched_posts = items -%}
        {%- break -%}
      {%- endif -%}
    {%- endfor -%}
  {%- endif -%}

  {%- assign posts = matched_posts | sort: "date" | reverse -%}

  {%- if posts and posts.size > 0 -%}
    <div class="articles-grid">
      {%- for post in posts -%}
        <article class="article-card">
          {%- assign card_image = post.image | default: post.featured_image -%}
          {%- if card_image -%}
            <img class="article-image"
                 src="{{ card_image | relative_url }}"
                 alt="{{ post.title | escape }}"
                 loading="lazy"
                 decoding="async">
          {%- endif -%}

          <div class="article-content">
            <span class="article-category">{{ display_label }}</span>

            {%- assign now  = site.time | date: '%s' | plus: 0 -%}
            {%- assign then = post.date  | date: '%s' | plus: 0 -%}
            {%- assign age  = now | minus: then -%}

            <h2 class="article-title">
              <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
              {%- if age < 604800 -%}<span class="badge-new pulse">NEW</span>{%- endif -%}
            </h2>

            <p class="article-excerpt">
              {{ post.excerpt | default: post.content | strip_html | truncate: 160 }}
            </p>

            <div class="article-meta">
              <time datetime="{{ post.date | date_to_xmlschema }}">
                {{ post.date | date: "%b %-d, %Y" }}
              </time>
              <a class="read-more" href="{{ post.url | relative_url }}">Read</a>
            </div>
          </div>
        </article>
      {%- endfor -%}
    </div>
  {%- else -%}
    <p>No posts in this category yet.</p>
  {%- endif -%}

  {{ content }}
</div>
